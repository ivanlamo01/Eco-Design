<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoDesign PVC | Aberturas de Alta Eficiencia en San Mart√≠n de los Andes</title>
    
    <!-- Scripts y Fuentes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Merriweather:wght@700&display=swap" rel="stylesheet">
    
    <!-- Estilos CSS -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            color: #E0E0E0; /* Texto claro por defecto para paneles oscuros */
            background-image: url('fondo.jpg'); /* Tu fondo */
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
        }
        /* Estilos de Tipograf√≠a y Marca */
        h1, h2, h3, h4, h5, .font-heading {
            font-family: 'Merriweather', serif;
            color: #FFFFFF; /* T√≠tulos blancos en paneles oscuros */
        }
        .bg-patagonia-accent { background-color: #004D40; } /* Verde EcoDesign */
        .text-patagonia-accent { color: #004D40; }
        .border-patagonia-accent { border-color: #004D40; }
        
        /* Estilos de Botones */
        .btn-primary {
            background-color: #004D40;
            color: #ffffff;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-primary:hover {
            background-color: #00382d;
            transform: translateY(-2px);
        }
        .btn-secondary {
            background-color: transparent;
            color: #004D40;
            border: 1px solid #004D40;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .btn-secondary:hover {
            background-color: #004D40;
            color: #ffffff;
        }

        /* Contenedor del Gr√°fico */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        
        /* Estilos de Formularios (dentro del panel oscuro) */
        .form-select, .form-input {
            background-color: #FFFFFF;
            border: 1px solid #D1D5DB;
            color: #3D4A5C; /* Texto oscuro para legibilidad en inputs */
        }
        .step-inactive {
            opacity: 0.5;
            pointer-events: none;
        }
    </style>
</head>
<body class="antialiased">
    
    <!-- Header Oscuro y Transl√∫cido -->
    <!-- --- INICIO DE CAMBIO: "Efecto Cristal" --- -->
    <header class="bg-neutral-900/45 backdrop-blur-sm border border-white/10 sticky top-0 z-50">
    <!-- --- FIN DE CAMBIO --- -->
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            
            <!-- Logo (requiere logo.png en la carpeta) -->
            <img src="logo.png" alt="EcoDesign PVC Logo" class="h-12 md:h-14" onerror="this.alt='EcoDesign PVC'; this.parentNode.innerHTML = '<h1 class=\'text-2xl font-bold text-white\'>EcoDesign<span class=\'font-light\'>PVC</span></h1>';">
            
            <nav class="hidden md:flex space-x-6">
                <a href="#diferenciales" class="text-white hover:text-patagonia-accent">Diferenciales</a>
                <a href="#configurador" class="text-white hover:text-patagonia-accent">Proyecto</a>
                <a href="#obras" class="text-white hover:text-patagonia-accent">Obras</a>
                <a href="#contacto" class="text-white hover:text-patagonia-accent">Contacto</a>
            </nav>
            <a href="#configurador" class="btn-primary px-4 py-2 rounded-lg font-semibold">Iniciar Proyecto</a>
        </div>
    </header>

    <main>
        
        <!-- Secci√≥n Hero con Texto Real -->
        <!-- --- INICIO DE CAMBIO: "Efecto Cristal" --- -->
        <section id="hero" class="bg-neutral-900/45 backdrop-blur-sm border border-white/10 rounded-2xl my-8 mx-4 md:mx-8">
        <!-- --- FIN DE CAMBIO --- -->
            <div class="container mx-auto px-6 py-20 md:py-32 text-center">
                <!-- --- INICIO DE CAMBIO: Texto de Hero --- -->
                <h2 class="text-4xl md:text-6xl font-bold tracking-tight leading-tight text-white">¬øBusc√°s aberturas que marquen la diferencia?</h2>
                <p class="mt-6 text-lg max-w-3xl mx-auto text-gray-200">Desde el coraz√≥n de San Mart√≠n de los Andes, combinamos ingenier√≠a, dise√±o y eficiencia energ√©tica para elevar la calidad de cada obra. Soluciones sustentables para construcciones inteligentes.</p>
                <!-- --- FIN DE CAMBIO --- -->
                <div class="mt-10">
                    <a href="#configurador" class="btn-primary px-8 py-4 rounded-lg font-bold text-lg">Comenzar a Configurar mi Proyecto</a>
                </div>
            </div>
        </section>

        <!-- Secci√≥n Diferenciales con Texto Real -->
        <section id="diferenciales" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h3 class="text-3xl font-bold text-white">Ingenier√≠a para elevar el confort de tu hogar</h3>
                </div>
                <div class="grid md:grid-cols-3 gap-8 text-center">
                    
                    <!-- Tarjeta 1 -->
                    <!-- --- INICIO DE CAMBIO: "Efecto Cristal" --- -->
                    <div class="bg-neutral-900/45 backdrop-blur-sm border border-white/10 p-8 rounded-2xl">
                    <!-- --- FIN DE CAMBIO --- -->
                        <div class="text-5xl text-patagonia-accent mb-4"> üìê</div>
                        <h4 class="text-xl font-semibold mb-2 text-white">Precisi√≥n Milim√©trica</h4>
                        <!-- --- INICIO DE CAMBIO: Texto de Tarjeta 1 --- -->
                        <p class="text-gray-200">Nacimos de la visi√≥n de un ingeniero. Dise√±amos, fabricamos y colocamos con precisi√≥n milim√©trica para un rendimiento y durabilidad superiores.</p>
                        <!-- --- FIN DE CAMBIO --- -->
                    </div>
                    
                    <!-- Tarjeta 2 -->
                    <!-- --- INICIO DE CAMBIO: "Efecto Cristal" --- -->
                    <div class="bg-neutral-900/45 backdrop-blur-sm border border-white/10 p-8 rounded-2xl">
                    <!-- --- FIN DE CAMBIO --- -->
                        <div class="text-5xl text-patagonia-accent mb-4">üçÉ</div>
                        <h4 class="text-xl font-semibold mb-2 text-white">Eficiencia para el Sur</h4>
                        <!-- --- INICIO DE CAMBIO: Texto de Tarjeta 2 --- -->
                        <p class="text-gray-200">Fabricamos aberturas pensadas para el clima patag√≥nico: m√°xima aislaci√≥n t√©rmica y cierres herm√©ticos de alta prestaci√≥n que ahorran energ√≠a.</p>
                        <!-- --- FIN DE CAMBIO --- -->
                    </div>
                    
                    <!-- Tarjeta 3 -->
                    <!-- --- INICIO DE CAMBIO: "Efecto Cristal" --- -->
                    <div class="bg-neutral-900/45 backdrop-blur-sm border border-white/10 p-8 rounded-2xl">
                    <!-- --- FIN DE CAMBIO --- -->
                        <div class="text-5xl text-patagonia-accent mb-4">ü§ù</div>
                        <h4 class="text-xl font-semibold mb-2 text-white">Atenci√≥n Personalizada</h4>
                        <!-- --- INICIO DE CAMBIO: Texto de Tarjeta 3 --- -->
                        <p class="text-gray-200">Cada proyecto es √∫nico, y nuestras aberturas tambi√©n. Ofrecemos soluciones a medida y cuidamos los detalles, la est√©tica y la eficiencia obra por obra.</p>
                        <!-- --- FIN DE CAMBIO --- -->
                    </div>
                </div>
            </div>
        </section>
        
        
        <!-- Secci√≥n Configurador con Texto Real -->
        <!-- --- INICIO DE CAMBIO: "Efecto Cristal" --- -->
        <section id="configurador" class="py-20 bg-neutral-900/45 backdrop-blur-sm border border-white/10 rounded-2xl my-8 mx-4 md:mx-8">
        <!-- --- FIN DE CAMBIO --- -->
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <!-- --- INICIO DE CAMBIO: Texto de Configurador --- -->
                    <h3 class="text-3xl font-bold text-white">Inici√° tu Proyecto</h3>
                    <p class="mt-2 text-gray-200 max-w-2xl mx-auto">Descubr√≠ c√≥mo optimizar tu obra con eficiencia y estilo. Us√° esta herramienta para agilizar el contacto con nuestro equipo t√©cnico y recibir una pre-cotizaci√≥n.</p>
                    <!-- --- FIN DE CAMBIO --- -->
                </div>

                <div class="max-w-4xl mx-auto">
                    
                    <!-- Paso 1: Tipo de Proyecto -->
                    <div id="step1" class="bg-gray-800/60 p-8 rounded-xl shadow-md border border-gray-700 text-white">
                        <h4 class="text-xl font-semibold mb-4">Paso 1: Tipo de Proyecto</h4>
                        <p class="mb-6 text-gray-300">Seleccion√° si est√°s construyendo desde cero o reemplazando aberturas existentes.</p>
                        <div class="flex flex-col sm:flex-row gap-4">
                            <button id="btn-obra-nueva" onclick="selectProjectType('obra-nueva')" class="flex-1 text-left p-6 border-2 border-patagonia-accent rounded-lg bg-teal-700 text-white">
                                <h5 class="font-bold text-lg">üèóÔ∏è Obra Nueva</h5>
                                <p class="text-sm text-gray-200">Para construcciones nuevas o ampliaciones.</p>
                            </button>
                            <button id="btn-renovacion" onclick="selectProjectType('renovacion')" class="flex-1 text-left p-6 border-2 border-gray-600 rounded-lg bg-gray-700 text-white">
                                <h5 class="font-bold text-lg">üè† Renovaci√≥n</h5>
                                <p class="text-sm text-gray-200">Para reemplazar aberturas existentes.</p>
                            </button>
                        </div>
                    </div>

                    <!-- Paso 2: Agregar Aberturas -->
                    <div id="step2" class="mt-8 bg-gray-800/60 p-8 rounded-xl shadow-md border border-gray-700 step-inactive text-white">
                        <h4 class="text-xl font-semibold mb-6">Paso 2: Agreg√° tus Aberturas</h4>
                        <div class="grid md:grid-cols-2 gap-6 items-end">
                            <div>
                                <label for="tipoAbertura" class="block text-sm font-medium text-gray-300">Tipo de Abertura</label>
                                <select id="tipoAbertura" class="mt-1 block w-full py-2 px-3 border border-gray-600 bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-green-800 focus:border-green-800 sm:text-sm text-white">
                                    <option>Ventana Fija</option>
                                    <option>Ventana de Abrir</option>
                                    <option>Ventana Oscilobatiente</option>
                                    <option>Puerta Balc√≥n Corrediza</option>
                                    <option>Puerta de Entrada</option>
                                </select>
                            </div>
                            <div>
                                <label for="tipoVidrio" class="block text-sm font-medium text-gray-300">Tipo de Vidrio</label>
                                <select id="tipoVidrio" class="mt-1 block w-full py-2 px-3 border border-gray-600 bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-green-800 focus:border-green-800 sm:text-sm text-white">
                                    <option value="DVH">DVH (Doble Vidriado Herm√©tico)</option>
                                    <option value="TVH">TVH (Triple Vidriado Herm√©tico)</option>
                                </select>
                            </div>
                            <div>
                                <label for="ancho" class="block text-sm font-medium text-gray-300">Ancho (cm)</label>
                                <input type="number" id="ancho" placeholder="Ej: 150" class="mt-1 block w-full py-2 px-3 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-800 focus:border-green-800 sm:text-sm bg-gray-700 text-white">
                            </div>
                            <div>
                                <label for="alto" class="block text-sm font-medium text-gray-300">Alto (cm)</label>
                                <input type="number" id="alto" placeholder="Ej: 110" class="mt-1 block w-full py-2 px-3 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-800 focus:border-green-800 sm:text-sm bg-gray-700 text-white">
                            </div>
                            <div class="md:col-span-2">
                                <button onclick="addOpening()" class="w-full btn-primary font-semibold py-3 px-4 rounded-lg">
                                    Agregar Abertura al Proyecto
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Paso 3: Resumen del Proyecto -->
                    <div id="step3" class="mt-8 bg-gray-800/60 p-8 rounded-xl shadow-md border border-gray-700 step-inactive text-white">
                        <h4 class="text-xl font-semibold mb-4">Paso 3: Resumen del Proyecto</h4>
                        <p id="no-openings-message" class="text-gray-300 mb-4">A√∫n no has agregado ninguna abertura. Utiliz√° el formulario anterior para empezar.</p>
                        <div id="project-summary-content" class="hidden">
                            <div class="grid lg:grid-cols-2 gap-8">
                                <div class="overflow-x-auto">
                                     <table class="min-w-full divide-y divide-gray-700">
                                        <thead class="bg-gray-700">
                                            <tr>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-200 uppercase tracking-wider">Tipo</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-200 uppercase tracking-wider">Medidas</th>
                                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-200 uppercase tracking-wider">Vidrio</th>
                                                <th class="px-2 py-3"></th>
                                            </tr>
                                        </thead>
                                        <tbody id="openings-table-body" class="bg-gray-800/50 divide-y divide-gray-700 text-gray-100">
                                            <!-- Filas de la tabla generadas por JS -->
                                        </tbody>
                                    </table>
                                </div>
                                <div class="flex flex-col items-center justify-center">
                                    <h5 class="font-semibold mb-2 text-white">Composici√≥n del Proyecto</h5>
                                    <div class="chart-container">
                                        <canvas id="projectChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-8">
                                 <button id="continue-to-contact" class="w-full btn-primary font-semibold py-3 px-4 rounded-lg">Continuar al √∫ltimo paso</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Paso 4: Datos de Contacto -->
                     <div id="step4" class="mt-8 bg-gray-800/60 p-8 rounded-xl shadow-md border border-gray-700 hidden text-white">
                        <h4 class="text-xl font-semibold mb-6">Paso 4: Datos de Contacto</h4>
                        <form id="contact-form">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="name" class="block text-sm font-medium text-gray-300">Nombre y Apellido</label>
                                    <input type="text" id="name" required class="mt-1 block w-full py-2 px-3 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-800 focus:border-green-800 sm:text-sm bg-gray-700 text-white">
                                </div>
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-300">Email</label>
                                    <input type="email" id="email" required class="mt-1 block w-full py-2 px-3 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-800 focus:border-green-800 sm:text-sm bg-gray-700 text-white">
                                </div>
                                <div>
                                    <label for="phone" class="block text-sm font-medium text-gray-300">Tel√©fono</label>
                                    <input type="tel" id="phone" class="mt-1 block w-full py-2 px-3 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-800 focus:border-green-800 sm:text-sm bg-gray-700 text-white">
                                </div>
                                <div class="md:col-span-2">
                                     <label for="comments" class="block text-sm font-medium text-gray-300">Comentarios Adicionales</label>
                                     <textarea id="comments" rows="4" class="mt-1 block w-full py-2 px-3 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-800 focus:border-green-800 sm:text-sm bg-gray-700 text-white" placeholder="Si ten√©s alguna especificaci√≥n, pod√©s detallarla ac√°."></textarea>
                                </div>
                                <div class="md:col-span-2">
                                    <button type="submit" class="w-full btn-primary font-bold py-3 px-4 rounded-lg text-lg">Enviar Solicitud de Cotizaci√≥n</button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- Mensaje de √âxito -->
                    <div id="success-message" class="mt-8 bg-green-900/50 p-8 rounded-xl shadow-md border border-green-700 text-center hidden text-white">
                        <h4 class="text-2xl font-bold text-green-200 mb-4">¬°Gracias por tu solicitud!</h4>
                        <p class="text-green-100">Hemos recibido los detalles de tu proyecto. Un miembro de nuestro equipo t√©cnico se pondr√° en contacto con vos a la brevedad para continuar con la cotizaci√≥n formal.</p>
                        <p class="mt-6">
                           <button onclick="resetForm()" class="btn-secondary font-semibold py-2 px-4 rounded-lg bg-gray-700 text-green-200 border-green-200 hover:bg-green-200 hover:text-gray-900">Iniciar un nuevo proyecto</button>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- --- INICIO DE CAMBIO: Secci√≥n Obras ahora dentro de un panel --- -->
        <!-- --- INICIO DE CAMBIO: "Efecto Cristal" --- -->
        <section id="obras" class="p-12 md:p-20 bg-neutral-900/30 backdrop-blur-sm border border-white/10 rounded-2xl my-8 mx-4 md:mx-8">
        <!-- --- FIN DE CAMBIO --- -->
            <div class="container mx-auto px-6">
                 <div class="text-center mb-12">
                    <h3 class="text-3xl font-bold text-white">Obras Reales en San Mart√≠n de los Andes</h3>
                    <p class="mt-2 text-gray-200 max-w-2xl mx-auto">Calidad, terminaciones impecables y soluciones personalizadas instaladas por nuestro equipo.</p>
                </div>
                <!-- --- INICIO DE CAMBIO: Placeholders con color de marca --- -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <img src="https://placehold.co/600x400/004D40/FFFFFF?text=Obra+Residencial" alt="Obra residencial con aberturas de PVC de EcoDesign" class="rounded-lg shadow-lg object-cover w-full h-64">
                    <img src="https://placehold.co/600x400/004D40/FFFFFF?text=Detalle+Ventana" alt="Detalle de una ventana de PVC instalada" class="rounded-lg shadow-lg object-cover w-full h-64">
                    <img src="https://placehold.co/600x400/004D40/FFFFFF?text=Puerta+Balc%C3%B3n" alt="Puerta balc√≥n de PVC en casa de monta√±a" class="rounded-lg shadow-lg object-cover w-full h-64">
                    <img src="https://placehold.co/600x400/004D40/FFFFFF?text=Obra+Comercial" alt="Aberturas de PVC en un local comercial" class="rounded-lg shadow-lg object-cover w-full h-64">
                    <img src="https://placehold.co/600x400/004D40/FFFFFF?text=Ventana+Panor%C3%A1mica" alt="Ventana panor√°mica con vista a la monta√±a" class="rounded-lg shadow-lg object-cover w-full h-64">
                    <img src="https://placehold.co/600x400/004D40/FFFFFF?text=Vista+Interior" alt="Vista desde el interior a trav√©s de una ventana EcoDesign" class="rounded-lg shadow-lg object-cover w-full h-64">
                </div>
                <!-- --- FIN DE CAMBIO --- -->
            </div>
        </section>
        <!-- --- FIN DE CAMBIO --- -->
    </main>

    
    <!-- Footer -->
    <!-- --- INICIO DE CAMBIO: "Efecto Cristal" (con opacidad 70 original) --- -->
    <footer id="contacto" class="bg-neutral-900/55 backdrop-blur-sm border border-white/10 text-white">
    <!-- --- FIN DE CAMBIO --- -->
        <div class="container mx-auto px-6 py-12">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <h4 class="text-xl font-bold font-heading text-white">EcoDesign PVC</h4>
                    <p class="mt-2 text-gray-300">Aberturas de alta eficiencia.<br>San Mart√≠n de los Andes, Patagonia.</p>
                </div>
                 <div>
                    <h4 class="text-lg font-semibold font-heading text-white">Navegaci√≥n</h4>
                    <ul class="mt-2 space-y-1">
                        <li><a href="#diferenciales" class="text-gray-300 hover:text-white">Diferenciales</a></li>
                        <li><a href="#configurador" class="text-gray-300 hover:text-white">Proyecto</a></li>
                        <li><a href="#obras" class="text-gray-300 hover:text-white">Obras</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold font-heading text-white">Contacto</h4>
                    <!-- --- INICIO DE CAMBIO: Texto de Footer --- -->
                    <p class="mt-2 text-gray-300">üì© Escribinos hoy y llev√° tu proyecto al siguiente nivel con aberturas premium hechas a tu medida.</p>
                    <!-- --- FIN DE CAMBIO --- -->
                    <a href="mailto:ventas@ecodesignpvc.com" class="mt-4 inline-block bg-white text-patagonia-accent font-bold py-2 px-4 rounded-lg hover:bg-gray-200">ventas@ecodesignpvc.com</a>
                </div>
            </div>
            <div class="mt-10 pt-6 border-t border-gray-700 text-center text-gray-400 text-sm">
                <p>&copy; 2025 EcoDesign PVC. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

<!-- Script del Configurador Interactivo -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- State Management ---
    let project = {
        type: 'obra-nueva',
        openings: []
    };

    let chartInstance = null;
    const ctx = document.getElementById('projectChart').getContext('2d');
    
    // --- DOM Element Cache ---
    const elements = {
        step2: document.getElementById('step2'),
        step3: document.getElementById('step3'),
        step4: document.getElementById('step4'),
        btnObraNueva: document.getElementById('btn-obra-nueva'),
        btnRenovacion: document.getElementById('btn-renovacion'),
        tipoAbertura: document.getElementById('tipoAbertura'),
        tipoVidrio: document.getElementById('tipoVidrio'),
        ancho: document.getElementById('ancho'),
        alto: document.getElementById('alto'),
        noOpeningsMessage: document.getElementById('no-openings-message'),
        projectSummaryContent: document.getElementById('project-summary-content'),
        tableBody: document.getElementById('openings-table-body'),
        contactForm: document.getElementById('contact-form'),
        successMessage: document.getElementById('success-message'),
        configuratorSection: document.getElementById('configurador'),
        continueToContactBtn: document.getElementById('continue-to-contact'),
    };

    // --- Chart Initialization ---
    function initializeChart() {
        if(chartInstance) {
            chartInstance.destroy();
        }
        chartInstance = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: [],
                datasets: [{
                    label: 'Tipos de Aberturas',
                    data: [],
                    backgroundColor: [
                        '#004D40', '#344E41', '#588157', '#A3B18A', '#DAD7CD'
                    ],
                    borderColor: '#111827', // Borde oscuro para el gr√°fico
                    borderWidth: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#E0E0E0', // Etiquetas claras
                            font: {
                                family: "'Inter', sans-serif"
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed !== null) {
                                    label += context.parsed;
                                }
                                return label;
                            }
                        },
                        bodyFont: {
                            family: "'Inter', sans-serif"
                        },
                        titleFont: {
                            family: "'Inter', sans-serif"
                        }
                    }
                }
            }
        });
    }

    // --- UI Update Functions ---
    function updateUI() {
        // Actualizar visibilidad del resumen
        const hasOpenings = project.openings.length > 0;
        elements.noOpeningsMessage.classList.toggle('hidden', hasOpenings);
        elements.projectSummaryContent.classList.toggle('hidden', !hasOpenings);

        // Limpiar y rellenar la tabla
        elements.tableBody.innerHTML = '';
        project.openings.forEach((op, index) => {
            const row = `
                <tr class="text-sm">
                    <td class="px-4 py-3">${op.type}</td>
                    <td class="px-4 py-3">${op.width}x${op.height} cm</td>
                    <td class="px-4 py-3">${op.glass}</td>
                    <td class="px-2 py-3 text-center">
                        <button onclick="window.deleteOpening(${index})" class="text-red-400 hover:text-red-200">
                            üóëÔ∏è
                        </button>
                    </td>
                </tr>`;
            elements.tableBody.innerHTML += row;
        });
        
        // Actualizar el gr√°fico
        updateChart();
    }

    function updateChart() {
        if (!chartInstance) return;

        const typeCounts = project.openings.reduce((acc, op) => {
            acc[op.type] = (acc[op.type] || 0) + 1;
            return acc;
        }, {});

        chartInstance.data.labels = Object.keys(typeCounts);
        chartInstance.data.datasets[0].data = Object.values(typeCounts);
        chartInstance.update();
    }
    
    // --- Global Event Handlers (Attached to Window) ---
    window.selectProjectType = (type) => {
        project.type = type;
        // Actualizar estilos de botones
        if (type === 'obra-nueva') {
            elements.btnObraNueva.classList.remove('border-gray-600', 'bg-gray-700');
            elements.btnObraNueva.classList.add('border-patagonia-accent', 'bg-teal-700');
            elements.btnRenovacion.classList.add('border-gray-600', 'bg-gray-700');
            elements.btnRenovacion.classList.remove('border-patagonia-accent', 'bg-teal-700');
        } else {
            elements.btnRenovacion.classList.remove('border-gray-600', 'bg-gray-700');
            elements.btnRenovacion.classList.add('border-patagonia-accent', 'bg-teal-700');
            elements.btnObraNueva.classList.add('border-gray-600', 'bg-gray-700');
            elements.btnObraNueva.classList.remove('border-patagonia-accent', 'bg-teal-700');
        }
        // Activar siguientes pasos
        elements.step2.classList.remove('step-inactive');
        elements.step3.classList.remove('step-inactive');
    };

    window.addOpening = () => {
        const type = elements.tipoAbertura.value;
        const glass = elements.tipoVidrio.value;
        const width = elements.ancho.value;
        const height = elements.alto.value;

        // Validaci√≥n simple
        if (!width || !height || width <= 0 || height <= 0) {
            elements.ancho.classList.add('border-red-500', 'ring-red-500');
            elements.alto.classList.add('border-red-500', 'ring-red-500');
            setTimeout(() => {
                elements.ancho.classList.remove('border-red-500', 'ring-red-500');
                elements.alto.classList.remove('border-red-500', 'ring-red-500');
            }, 2000);
            return;
        }

        project.openings.push({ type, glass, width, height });
        
        // Resetear inputs
        elements.ancho.value = '';
        elements.alto.value = '';
        elements.tipoAbertura.focus();

        updateUI();
    };

    window.deleteOpening = (index) => {
        project.openings.splice(index, 1);
        updateUI();
    };
    
    // --- Local Event Listeners ---
    elements.continueToContactBtn.addEventListener('click', () => {
        elements.step4.classList.remove('hidden');
        elements.step4.scrollIntoView({ behavior: 'smooth' });
    });

    elements.contactForm.addEventListener('submit', (e) => {
        e.preventDefault();
        // Ocultar todos los pasos, mostrar √©xito
        elements.step1.classList.add('hidden');
        elements.step2.classList.add('hidden');
        elements.step3.classList.add('hidden');
        elements.step4.classList.add('hidden');
        elements.successMessage.classList.remove('hidden');
        elements.configuratorSection.scrollIntoView({ behavior: 'smooth' });
        
        // Aqu√≠ es donde enviar√≠as los datos (project y datos del form) a un backend
        console.log("Proyecto a enviar:", project);
        console.log("Datos de contacto:", {
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phone').value,
            comments: document.getElementById('comments').value
        });
    });
    
    window.resetForm = () => {
        // Resetear estado
        project.type = 'obra-nueva';
        project.openings = [];
        
        elements.contactForm.reset();
        
        // Resetear UI
        elements.successMessage.classList.add('hidden');
        elements.step1.classList.remove('hidden');
        elements.step2.classList.remove('hidden');
        elements.step3.classList.remove('hidden');
        elements.step4.classList.add('hidden');

        elements.step2.classList.add('step-inactive');
        elements.step3.classList.add('step-inactive');
        
        selectProjectType('obra-nueva');
        updateUI();
    };

    // --- Initial Load ---
    initializeChart();
    updateUI();
});
</script>
</body>
</html>











